---
title: ç§Ÿæˆ·ä½¿ç”¨æŒ‡å—
navigation:
  icon: i-lucide-bone
---

## ğŸ¯ ç§Ÿæˆ·ä¿¡æ¯å®æ—¶æ¼”ç¤º

ä¸‹é¢æ˜¯ä¸€ä¸ªäº¤äº’å¼æ¼”ç¤º,å±•ç¤ºäº†å¦‚ä½•åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç§Ÿæˆ·ä¿¡æ¯:

::tenant
::

::note
ä¸Šé¢çš„æ¼”ç¤ºç»„ä»¶ä¼šæ ¹æ®å½“å‰è®¿é—®çš„åŸŸåè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”çš„ç§Ÿæˆ·ä¿¡æ¯ã€‚ä½ å¯ä»¥é€šè¿‡åˆ‡æ¢ä¸åŒçš„åŸŸåæ¥æŸ¥çœ‹ä¸åŒç§Ÿæˆ·çš„æ•°æ®ã€‚
::

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1 isTenant() å·¥å…·å‡½æ•°ï¼ˆæ¨èğŸ”¥ï¼‰

```vue
<script setup lang="ts">
import { isTenant } from '~/utils/business/nation'
import { TENANT_ID_MAP } from '~/constants/site-type';
</script>

<template>
  <section class="p-4 rounded-lg border border-blue-200">
    <p v-if="isTenant(TENANT_ID_MAP.default)">é»˜è®¤ç§Ÿæˆ·: {{ isDefaultTenant ? 'âœ…' : 'âŒ' }}</p>
    <p v-if="isTenant(TENANT_ID_MAP.baigou)">ç™½æ²Ÿç§Ÿæˆ·: {{ isBaigouTenant ? 'âœ…' : 'âŒ' }}</p>
    <p v-if="isTenant([TENANT_ID_MAP.default, TENANT_ID_MAP.baigou])">é»˜è®¤æˆ–ç™½æ²Ÿ: {{ isMallTenant ? 'âœ…' : 'âŒ' }}</p>
  </section>
</template>
```

### æ–¹å¼ 2 å…¨å±€æ³¨å…¥

æ’ä»¶ `plugins/01.site-type.ts` æä¾›äº†ä»¥ä¸‹å…¨å±€æ³¨å…¥ï¼š

- `$tenantId` - å½“å‰ç§Ÿæˆ· IDï¼ˆå¦‚ 'T0001', 'T0002'ï¼‰
- `$tenantTheme` - å½“å‰ç§Ÿæˆ·ä¸»é¢˜ï¼ˆå¦‚ 'default', 'dark', 'english'ï¼‰
- `$siteType` - å½“å‰ç«™ç‚¹ç±»å‹ï¼ˆå¦‚ 'default', 'baigou'ï¼‰
- `$siteTypeInfo` - å®Œæ•´çš„ç«™ç‚¹ç±»å‹ä¿¡æ¯å¯¹è±¡ ï¼ˆå¯æ‹“å±•é…ç½®é¡¹ï¼‰

```vue
<script setup lang="ts">
const { $tenantId, $tenantTheme, $siteType, $siteTypeInfo } = useNuxtApp()
</script>

<template>
  <section class="p-4 rounded-lg border border-gray-200">
    <p>ç§Ÿæˆ· ID: {{ $tenantId }}</p>
    <p>ç§Ÿæˆ·ä¸»é¢˜: {{ $tenantTheme }}</p>
    <p>ç«™ç‚¹ç±»å‹: {{ $siteType }}</p>
    <p>ç«™ç‚¹ä¿¡æ¯: {{ JSON.stringify($siteTypeInfo) }}</p>
  </section>
</template>
```

### æ–¹å¼ 3ï¼šä½¿ç”¨ Composable useSiteType()

```vue
<script setup lang="ts">
const { tenantId, tenantTheme, siteType, siteTypeInfo } = useSiteType()
</script>

<template>
  <section class="p-4 rounded-lg border border-emerald-200">
    <p>ç§Ÿæˆ· ID: {{ tenantId }}</p>
    <p>ç§Ÿæˆ·ä¸»é¢˜: {{ tenantTheme }}</p>
    <p>ç«™ç‚¹ç±»å‹: {{ siteType }}</p>
    <p>å®Œæ•´ä¿¡æ¯: {{ JSON.stringify(siteTypeInfo) }}</p>
  </section>
</template>
```

## ğŸ¨ åœ¨ CSS ä¸­ä½¿ç”¨

HTML å±æ€§ä¼šè‡ªåŠ¨è®¾ç½®ï¼Œå¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨ï¼š

```vue
<style scoped>
/* æ ¹æ®ç«™ç‚¹ç±»å‹åº”ç”¨æ ·å¼ */
:root[site-type="baigou"] .logo {
  content: url('/images/logo-baigou.png');
}

:root[site-type="default"] .logo {
  content: url('/images/logo-default.png');
}
</style>
```

## ğŸ” æ¡ä»¶æ¸²æŸ“

### æ ¹æ®ç§Ÿæˆ· ID æ¡ä»¶æ¸²æŸ“

```vue
<template>
  <div>
    <!-- åªåœ¨ç‰¹å®šç§Ÿæˆ·æ˜¾ç¤º -->
    <div v-if="$tenantId === 'T0001'">
      è¿™æ˜¯é»˜è®¤ç§Ÿæˆ·çš„å†…å®¹
    </div>
    
    <div v-if="$tenantId === 'T0002'">
      è¿™æ˜¯ç™½æ²Ÿç§Ÿæˆ·çš„å†…å®¹
    </div>
    
    <!-- ä½¿ç”¨å·¥å…·å‡½æ•° -->
    <div v-if="isTenant('T0001')">
      ä½¿ç”¨ isTenant å·¥å…·å‡½æ•°
    </div>
    
    <div v-if="isTenant(['T0001', 'T0002'])">
      å¤šä¸ªç§Ÿæˆ·éƒ½æ˜¾ç¤º
    </div>
  </div>
</template>

<script setup lang="ts">
import { isTenant } from '~/utils/business/nation'
const { $tenantId } = useNuxtApp()
</script>
```

### æ ¹æ®ä¸»é¢˜æ¡ä»¶æ¸²æŸ“

```vue
<template>
  <div>
    <DarkHeader v-if="$tenantTheme === 'dark'" />
    <LightHeader v-else />
  </div>
</template>

<script setup lang="ts">
const { $tenantTheme } = useNuxtApp()
</script>
```

## ğŸ“Š å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šç§Ÿæˆ·ç‰¹å®šçš„è·¯ç”±è·³è½¬

```vue
<script setup lang="ts">
const { $tenantId } = useNuxtApp()

const goToProducts = () => {
  // æ ¹æ®ç§Ÿæˆ·è·³è½¬åˆ°ä¸åŒé¡µé¢
  if ($tenantId.value === 'T0001') {
    navigateTo('/products')
  } else if ($tenantId.value === 'T0002') {
    navigateTo('/baigou-products')
  }
}
</script>
```

### åœºæ™¯ 2ï¼šç§Ÿæˆ·ç‰¹å®šçš„é…ç½®

```typescript
// composables/useTenantConfig.ts
export const useTenantConfig = () => {
  const { tenantId } = useSiteType()
  
  const config = computed(() => {
    const configs = {
      'T0001': {
        logo: '/images/logo-default.png',
        primaryColor: '#1890ff',
        contactEmail: 'support@default.com'
      },
      'T0002': {
        logo: '/images/logo-baigou.png',
        primaryColor: '#722ed1',
        contactEmail: 'support@baigou.com'
      }
    }
    
    return configs[tenantId.value as keyof typeof configs] || configs['T0001']
  })
  
  return config
}

// ä½¿ç”¨
const config = useTenantConfig()
console.log(config.value.logo)
```

### åœºæ™¯ 3ï¼šç§Ÿæˆ·ç‰¹å®šçš„å›½é™…åŒ–

```vue
<script setup lang="ts">
const { $tenantId, $tenantTheme } = useNuxtApp()
const { locale } = useI18n()

// æ ¹æ®ç§Ÿæˆ·è®¾ç½®è¯­è¨€
watchEffect(() => {
  if ($tenantTheme.value === 'english') {
    locale.value = 'en'
  } else {
    locale.value = 'zh-CN'
  }
})
</script>
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å“åº”å¼è®¿é—®

æ ¹æ®è®¿é—®æ–¹å¼ä¸åŒï¼Œéœ€è¦æ³¨æ„æ˜¯å¦éœ€è¦ `.value`ï¼š

```typescript
// æ–¹å¼ 1ï¼šé€šè¿‡ useNuxtApp() - è¿”å› ComputedRefï¼Œéœ€è¦ .value
const { $tenantId } = useNuxtApp()
console.log($tenantId.value) // âœ… æ­£ç¡®

// æ–¹å¼ 2ï¼šé€šè¿‡ useSiteType() - è¿”å› ComputedRefï¼Œéœ€è¦ .value
const { tenantId } = useSiteType()
console.log(tenantId.value) // âœ… æ­£ç¡®
```

### 2. æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…

åœ¨ Vue æ¨¡æ¿ä¸­ï¼Œå“åº”å¼å˜é‡ä¼šè‡ªåŠ¨è§£åŒ…ï¼š

```vue
<template>
  <!-- âœ… æ­£ç¡® - è‡ªåŠ¨è§£åŒ… -->
  <div>{{ $tenantId }}</div>
  
  <!-- âŒ ä¸éœ€è¦ .value -->
  <div>{{ $tenantId.value }}</div>
</template>
```

## ğŸ“š ç›¸å…³æ–‡ä»¶åœ°å€

- [å¤šç§Ÿæˆ·å¸¸é‡é…ç½®](constants/site-type.ts)
- [useSiteType Composable](../composables/useSiteType.ts)
- [ç§Ÿæˆ·å·¥å…·å‡½æ•°](../utils/business/nation.ts)

